!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["for-form-embed-handler"]=t():e["for-form-embed-handler"]=t()}(this,function(){return function(){"use strict";var e={};function t(e){return e.map(e=>{let t=e.substring(e.indexOf("=")+1),n=encodeURIComponent(decodeURIComponent(t));return e.replace(t,n)}).join("&")}let n=/^(https?:\/\/)?([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}(:[0-9]{1,5})?(\/[^\s]*)?$/i;return window.jotformEmbedHandler=function(e,o){!function(){let o=document.querySelector(e);if(o){let{src:e}=o;if(e.includes("jsForm=true"))return;let i=window.location.href,r="";if(i&&i.indexOf("?")>-1&&(r=t(r=i.substring(i.indexOf("?")+1).split("&"))),e&&e.indexOf("?")>-1){let n=e.substr(e.indexOf("?")+1).split("&");n=t(n),r+=`&${n}`,e=e.substring(0,e.indexOf("?"))}r+=`&isIframeEmbed=1&parentURL=${encodeURIComponent(function(){let e=window.location.href;return n.test(e)?e:window.top.location.href}())}`,o.src=`${e}?${r}`}}(),window.isPermitted=function(e,t){let n=document.createElement("a");n.href=e;let{hostname:o}=n,i=!1;if(void 0!==o)return t.forEach(e=>{(o.slice(-1*e.length-1)===".".concat(e)||o===e)&&(i=!0)}),i},window.addEventListener("message",function(t){if("object"==typeof t.data)return;let n=t.data.split(":"),i=document.querySelector(e);if(!i)return;let r=[];if(o){let{hostname:e}=new URL(o);r=[e]}else r=["jotform.com","jotform.pro"];var c=r;let d=document.querySelector(e);switch(n[0]){case"scrollIntoView":d.scrollIntoView();break;case"setHeight":d.style.height=`${n[1]}px`,!Number.isNaN(n[1])&&parseInt(d.style.minHeight,10)>parseInt(n[1],10)&&(d.style.minHeight=`${n[1]}px`);break;case"setMinHeight":d.style.minHeight=`${n[1]}px`;break;case"collapseErrorPage":d.clientHeight>window.innerHeight&&(d.style.height=`${window.innerHeight}px`);break;case"reloadPage":window.location.reload();break;case"removeIframeOnloadAttr":d.removeAttribute("onload");break;case"loadScript":if(!window.isPermitted(t.origin,c))break;let l=document.createElement("script");l.src=n.length>3?`${n[1]}:${n[2]}`:n[1],l.type="text/javascript",document.body.appendChild(l);break;case"exitFullscreen":window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen||window.document.mozCancelFullscreen?window.document.mozCancelFullScreen():window.document.webkitExitFullscreen?window.document.webkitExitFullscreen():window.document.msExitFullscreen&&window.document.msExitFullscreen();break;case"setDeviceType":let[,s]=n;window.jfDeviceType=s;break;case"backgroundStyles":new URLSearchParams(n[1]).forEach((e,t)=>{d.style[t]=e}),(d.contentDocument?d.contentDocument:d.contentWindow.document||d.document).documentElement.style.background="none"}var a=r;if(window.isPermitted(t.origin,a)&&"contentWindow"in i&&"postMessage"in i.contentWindow){let e={docurl:encodeURIComponent(document.URL),referrer:encodeURIComponent(document.referrer)};i.contentWindow.postMessage(JSON.stringify({type:"urls",value:e}),"*")}},!1)},e=e.default}()});
//# sourceMappingURL=for-form-embed-handler.js.map